"use strict";(self.webpackChunkgloboFormbuilder=self.webpackChunkgloboFormbuilder||[]).push([[179],{4398:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});const o=r(9765),a={handleValidate:function(e){const t=this,r=e.querySelector(".block-container");if(!r)return;let a={};r.querySelectorAll("input, textarea, select").forEach((t=>{const o=null!==t.getAttribute("presence"),i=null!==t.getAttribute("disabled"),s=null!==t.getAttribute("data-type")&&t.getAttribute("data-type");if(a[t.name]={},i?a[t.name].ignore={}:o&&("products[]"==t.name?a[t.name].presence={message:this.forms[r.getAttribute("data-id")].errorMessage.requiredProducts}:a[t.name].presence={message:this.forms[r.getAttribute("data-id")].errorMessage.required}),"email"==s&&(a[t.name][s]={message:this.forms[r.getAttribute("data-id")].errorMessage.invalidEmail}),"name"==s&&(a[t.name].format={pattern:"^[ -.A-ï¿œ]+",flags:"s",message:this.forms[r.getAttribute("data-id")].errorMessage.invalidName}),"url"==s&&(a[t.name][s]={message:this.forms[r.getAttribute("data-id")].errorMessage.invalidURL}),"phone"==s&&(null!==t.getAttribute("validate")?null===t.getAttribute("onlyshowflag")&&(a[t.name].phone={message:this.forms[r.getAttribute("data-id")].errorMessage.invalidPhone}):a[t.name].format={pattern:"^[+]*[(]{0,1}[0-9+]{1,9}[)]{0,1}[-s.0-9 ]*$",flags:"i",message:this.forms[r.getAttribute("data-id")].errorMessage.invalidPhone}),"file"==s){const e=!1!==this.shop.pricing.features.fileUpload?1024*this.shop.pricing.features.fileUpload:2048;a[t.name][s]={notAllowedExtension:this.forms[r.getAttribute("data-id")].errorMessage.fileNotAllowed,sizeLimitMessage:this.forms[r.getAttribute("data-id")].errorMessage.fileSizeLimit,allowedExtension:t.getAttribute("data-allowed-extensions").split(","),maxFileSize:e}}if("checkbox"==s&&(a[t.name][s]={requiredMessage:this.forms[e.getAttribute("data-id")].errorMessage.required},a[t.name][s].isRequired=void 0!==a[t.name].presence),"password"==s){const e=null!==t.getAttribute("data-additional-type")&&t.getAttribute("data-additional-type"),o=null!==t.getAttribute("data-connected-element")&&t.getAttribute("data-connected-element");"confirm-password"===e&&o&&(a[t.name].equality={attribute:o,message:this.forms[r.getAttribute("data-id")].errorMessage.confirmPasswordNotMatch});let i=!(!t.getAttribute("data-validate-rule")||"false"==t.getAttribute("data-validate-rule"))&&t.getAttribute("data-validate-rule");i&&("advancedValidateRule"===i&&(i=null!==t.getAttribute("data-validate-rule")?t.getAttribute("data-advanced-validate-rule"):""),a[t.name].format={pattern:i,flags:"g",message:this.forms[r.getAttribute("data-id")].errorMessage.invalidPassword})}}));null!=e.querySelector(".block-container .globo-g-recaptcha")&&(a.reCaptcha={reCaptcha:{isRequired:!0,requiredMessage:this.forms[r.getAttribute("data-id")].errorMessage.requiredCaptcha}}),o.validators.file=function(t,r,o){const a=e.querySelector('[name="'+o+'"]');let i=0,s=!0;return Array.from(a.files).forEach((e=>{i+=e.size,-1===r.allowedExtension.indexOf(function(e){const t=e.split("\\").pop().split("/").pop(),r=t.lastIndexOf(".");return r<1?"":t.substr(r+1)}(e.name).toLowerCase())&&(s=!1)})),i/1e3>r.maxFileSize?r.sizeLimitMessage:s?null:r.notAllowedExtension},o.validators.checkbox=function(t,r,o,a){if(!r.isRequired)return null;const i=e.querySelectorAll("[name='"+o+"']");let s=!1;return i.forEach((e=>{e.checked&&(s=!0)})),s?null:r.requiredMessage},o.validators.reCaptcha=function(t,r,o,a){const i=e.querySelector("[name='"+o+"']");if(i){const e=grecaptcha.getResponse(i.getAttribute("reCaptcha-widget-id"));return i.value=e,""!=i.value?null:r.requiredMessage}return null},o.validators.ignore=function(){return null},o.validators.phone=function(o,a,i,s){const l=e.querySelectorAll("[name='"+i+"'][validate]");let n=!0;return l&&l.forEach((e=>{const o=e.getAttribute("data-intl-id"),a=t.phoneIntl[r.getAttribute("data-id")][i+"-"+o];if(void 0!==a&&e.value.trim()&&!a.isValidNumber()){const e=a.getValidationError();console.log("Phone validate ",0==e?"IS_POSSIBLE":1==e?"INVALID_COUNTRY_CODE":2==e?"TOO_SHORT":3==e?"TOO_LONG":4==e?"IS_POSSIBLE_LOCAL_ONLY":"INVALID_LENGTH"),n=!1}})),n?null:a.message};const i=o(r,a,{fullMessages:!1});!function(e,t){let r=!1;e.querySelectorAll("input[name], select[name], textarea[name]").forEach((e=>{if(n(e,t&&t[e.name]),!r&&t[e.name]){const t=d(e,"globo-form-control");t&&(Globo.FormBuilder.scrollIntoErrorGroup(t),r=!0)}}))}(r,i||{}),i&&Object.keys(i).length?r.classList.add("errors"):r.classList.remove("errors");const s=r.querySelectorAll("input:not(.item__quantity):not(.action--add-to-cart), textarea, select");for(var l=0;l<s.length;++l)s.item(l).addEventListener("change",(function(e){const t=o(r,a,{fullMessages:!1})||{};Object.keys(t).length?r.classList.add("errors"):r.classList.remove("errors"),n(this,t[this.name])}));function n(e,t){const r=d(e.parentNode,"globo-form-control"),o=r.querySelector(".messages");!function(e){e.classList.remove("has-error"),e.classList.remove("has-success"),e.querySelectorAll(".help-block.error").forEach((e=>{e.parentNode.removeChild(e)}))}(r),t?(r.classList.add("has-error"),t.forEach((e=>{!function(e,t){const r=document.createElement("p");r.classList.add("help-block"),r.classList.add("error"),r.innerText=t,e.appendChild(r)}(o,e)}))):r.classList.add("has-success")}function d(e,t){return e&&e!=document?e.classList.contains(t)?e:d(e.parentNode,t):null}},scrollIntoErrorGroup:function(e){e.scrollIntoView({behavior:"smooth",block:"nearest"})}},i={handleSubmit:function(e){e.preventDefault(),e.stopPropagation(),Globo.FormBuilder.handleValidate(e.target);const t=new CustomEvent("globo.formbuilder.form.beforeSubmit",{detail:{form:e.target,formId:e.target.getAttribute("data-id")}});document.dispatchEvent(t);if(e.target.querySelector(".block-container.errors"))return;const r=new CustomEvent("globo.formbuilder.form.submitting",{detail:{form:e.target,formId:e.target.getAttribute("data-id")}});document.dispatchEvent(r);var o=e.target.querySelector(".action.submit");o.classList.add("loading"),o.setAttribute("disabled","disabled");let a=e.target.closest(".globo-form-app").querySelectorAll(".message.success");var i=e.target.querySelectorAll("input, textarea, select"),s={"{{customer.name}}":Globo.FormBuilder.customer?Globo.FormBuilder.customer.name:"","{{customer.email}}":Globo.FormBuilder.customer?Globo.FormBuilder.customer.email:"","{{page.title}}":Globo.FormBuilder.page?Globo.FormBuilder.page.title:"","{{page.href}}":Globo.FormBuilder.page?Globo.FormBuilder.page.href:""};a.forEach((function(e){e.innerHTML=Globo.FormBuilder.addVariables(e.innerHTML,s,i)}));const l=e.target.querySelectorAll('[type="hidden"]');l&&l.forEach((function(e){if(e.value.indexOf("{{-")>-1&&e.value.indexOf("-}}")>-1){const t=e.value.replace("{{-","").replace("-}}","").trim().split(".");e.value=void 0!==Globo.FormBuilder[t[0]]&&void 0!==Globo.FormBuilder[t[0]][t[1]]?Globo.FormBuilder[t[0]][t[1]]:""}}));let n=[];const d=e.target.querySelectorAll(".action--add-to-cart"),c=Globo.FormBuilder.bulkOrder;let u=[];d.length&&d.forEach((e=>{e.checked&&(u=c.addItems(u,e))})),u.length&&void 0!==Globo.FormBuilder.page&&n.push(c.addProducts(u,e.target)),n.push(Globo.FormBuilder.xhr(e.target)),Promise.all(n).then((t=>{o.classList.remove("loading"),o.removeAttribute("disabled"),e.target.querySelectorAll(".message").forEach((function(e){e.style.display="none"}));let r="",a="";if(t.map((e=>{e?.items||"Cart Error"==e?.message?r=e:a=e})),"true"==a.success){const o=new CustomEvent("globo.formbuilder.form.submitted",{detail:{form:e.target,formId:e.target.getAttribute("data-id"),response:t}});if(document.dispatchEvent(o),void 0!==r.items){const o=Globo.FormBuilder.forms[e.target.getAttribute("data-id")].elements.find((e=>e.id="products"));o.successMessage&&e.target.querySelectorAll(".message.success").forEach((function(e){e.querySelector(".content").insertAdjacentHTML("beforebegin","<h4>"+o.successMessage+"</h4></br>")}));var l=new CustomEvent("globo.formbuilder.bulkorder.added",{detail:{form:e.target,formId:e.target.getAttribute("data-id"),response:t,cartItem:r.items}});document.dispatchEvent(l)}else if("Cart Error"==r.message){e.target.querySelector(".message.warning .content").innerHTML=r.description}const a=Globo.FormBuilder.forms[e.target.getAttribute("data-id")].afterSubmit;if(a.enableGa){const e=a.gaEventName&&Globo.FormBuilder.addVariables(a.gaEventName,s,i)||"",t=Globo.FormBuilder.addVariables(a.gaEventCategory,s,i)||"",r=Globo.FormBuilder.addVariables(a.gaEventAction,s,i)||"",o=Globo.FormBuilder.addVariables(a.gaEventLabel,s,i)||"";if("undefined"!=typeof gtag)gtag("event",e||"globo_form_submit",{event_category:t,event_action:r,event_label:o});else if("undefined"!=typeof ga){ga("send",{hitType:"event",eventCategory:t,eventAction:r,eventLabel:o})}}if("function"==typeof fbq&&a.enableFpx){const t=Globo.FormBuilder.addVariables(a.fpxTrackerName,s,i)||"GloboFormBuilder-Submit";fbq("trackCustom",t,{pageTitle:Globo.FormBuilder.page.title,pageHref:Globo.FormBuilder.page.href,formTitle:Globo.FormBuilder.forms[e.target.getAttribute("data-id")].header.title})}if(void 0!==Globo.FormBuilder.utm.view&&"formbuilder_edit"===Globo.FormBuilder.utm.view||"redirectToPage"!=a.action||window.setTimeout((function(){window.location.href=a.redirectUrl}),"undefined"!=typeof ga&&a.enableGa||"function"==typeof fbq&&a.enableFpx?1500:100),"clearForm"==a.action){(void 0===Globo.FormBuilder.utm.view||"formbuilder_edit"!==Globo.FormBuilder.utm.view)&&e.target.reset(),Globo.FormBuilder.showMessage(e.target.querySelector(".message.success")),Globo.FormBuilder.showMessage(e.target.querySelector(".message.warning")),void 0!==r.items&&Globo.FormBuilder.renderForm(e.target,e.target.getAttribute("data-id"),[{success:e.target.querySelector(".message.success").outerHTML}]);const{functions:t}=Globo.FormBuilder.forms[e.target.getAttribute("data-id")];t.includes("reCaptcha")&&Globo.FormBuilder.reCaptcha.resetReCaptcha(e);const o=e.target.querySelector(".globo-formbuilder-wizard");if(o){new Globo.FormBuilder.Wizard(e.target.closest(".globo-formbuilder"),o).reset()}}if("hideForm"==a.action){void 0!==Globo.FormBuilder.utm.view&&"formbuilder_edit"===Globo.FormBuilder.utm.view||(e.target.style.display="none");const t=e.target.parentNode.querySelectorAll(".message.success");t&&Globo.FormBuilder.showMessage(t[t.length-1]),Globo.FormBuilder.showMessage(e.target.querySelector(".message.warning"))}}else{const o=e.target.querySelector(".message.error .content"),i=void 0!==a.errors&&a.errors;if(i){let a="";for(var n=0;n<Object.keys(i).length;n++)if("string"==typeof i[n])a+='<div class="err-item"><span class="label"></span><span class="err">'+i[n]+"</span></div>";else{let t=e.target.querySelector('[name="_keyLabel"]');t&&(t=JSON.parse(t.value)),void 0!==t[Object.keys(i)[n]]?a+='<div class="err-item"><span class="label">'+t[Object.keys(i)[n]]+'</span> : <span class="err">'+i[Object.keys(i)[n]]+"</span></div>":a+='<div class="err-item"><span class="label"></span><span class="err">'+i[Object.keys(i)[n]]+"</span></div>"}if(void 0!==r.items){const o=Globo.FormBuilder.forms[e.target.getAttribute("data-id")].elements.find((e=>e.id="products"));e.target.querySelectorAll(".message.success").forEach((function(e){e.querySelector(".content").innerHTML="<h4>"+o.successMessage+"</h4></br>"})),Globo.FormBuilder.showMessage(e.target.querySelector(".message.success"));l=new CustomEvent("globo.formbuilder.bulkorder.added",{detail:{form:e.target,formId:e.target.getAttribute("data-id"),response:t,cartItem:r.items}});document.dispatchEvent(l)}else if("Cart Error"==r.message){e.target.querySelector(".message.warning .content").innerHTML=r.description,Globo.FormBuilder.showMessage(e.target.querySelector(".message.warning"))}o.innerHTML=a;const{functions:s}=Globo.FormBuilder.forms[e.target.getAttribute("data-id")];s.includes("reCaptcha")&&Globo.FormBuilder.reCaptcha.resetReCaptcha(e)}Globo.FormBuilder.showMessage(e.target.querySelector(".message.error"));const s=[{success:e.target.querySelector(".message.success").outerHTML},{error:e.target.querySelector(".message.error").outerHTML}];void 0!==r.items&&void 0!==Globo.FormBuilder.page&&Globo.FormBuilder.renderForm(e.target,e.target.getAttribute("data-id"),s)}}))},xhr:function(e){const t=e.getAttribute("action"),r=e.getAttribute("method"),o=e.querySelector(".block-container").getAttribute("data-id");let a=new FormData(e);const i=new FormData;let s,l=0;void 0!==a.fd&&(a=a.fd);for(const t of a)if(t[0].includes("select_product")){t[0]!==s&&(s=t[0],l=0);const r=JSON.parse(e.querySelector(`[name="${t[0]}"][value="${t[1]}"]`).nextElementSibling.innerHTML);i.append(t[0]+`[${l}][url]`,`https://${this.shop.url}/admin/products/${r.id}`),i.append(t[0]+`[${l}][name]`,r.title),l++}else{if(t[0].indexOf("products")>-1){const r=e.querySelector('.item__quantity[data-variant-id="'+t[1]+'"]');if(r){const e=t[0].split("-").length>1?`quantities-${t[0].split("-")[1]}`:"quantities[]";i.append(e,t[1]+" / "+r.value)}}if(t[0].indexOf("phone")>-1&&void 0!==this.phoneIntl&&void 0!==this.phoneIntl[o]){let r=e.querySelector('[name="'+t[0]+'"]').getAttribute("data-intl-id");void 0!==this.phoneIntl[o][t[0]+"-"+r]&&(t[1]=this.phoneIntl[o][t[0]+"-"+r].getNumber())}i.append(t[0],t[1])}return new Promise(((o,a)=>{o(fetch(t,{method:r,body:i}).then((function(e){if(e.ok)return e.json();{const t=new Error(e.statusText);throw t.response=e,t}})).then((e=>e)).catch((t=>{e.querySelector(".action.submit").classList.remove("loading");const r=e.querySelector(".message.error"),o=r.getAttribute("data-other-error"),a=e.querySelector(".message.error");a&&(a.innerHTML='<div class="err-item"><span class="label"></span><span class="err">'+(o||"Too many request, please try again later")+"</span></div>"),r&&this.showMessage(r)})))}))}},s=r(6808),l={...a,...i,showMessage:function(e){if(e){var t=e.querySelector(".content");null!==t&&""!=t.innerHTML&&(e.style.display="block")}},handleResetForm:function(e){const t=e.closest(".globo-formbuilder");if(t){const e=t.querySelectorAll(".globo-form-control [name]:not([type='file']):not([type='hidden'][data-type='fixed'])");e&&e.forEach((function(e){const t=e.closest(".globo-form-control");!t||null!=t.getAttribute("data-default-value")&&""!=t.getAttribute("data-default-value")&&","!=t.getAttribute("data-default-value")&&"\\"!=t.getAttribute("data-default-value")||("checkbox"==e.type||"radio"==e.type?e.checked=!1:e.value="")}));const r=t.querySelector(".globo-formbuilder-wizard");if(r){new this.Wizard(t,r).reset()}this.handleHiddenField(this.forms[t.getAttribute("data-id")],t)}},dismiss:function(e){e.parentNode.style.display="none";var t=e.closest(".message");if(t.classList.contains("success")){var r=e.closest(".g-container");t.innerHTML=Globo.FormBuilder.forms[r.getAttribute("data-id")].afterSubmit.message}},addVariables:function(e,t,r){var o=[];return e=e.replace(/{{customer.name}}|{{customer.email}}|{{page.title}}|{{page.href}}/g,(function(e){return t[e]})),r.length&&r.forEach((t=>{const r="checkbox"===t.type||"file"===t.type&&t.multiple?t.name.split("[")[0]:t.name;e.indexOf("{{"+r+"}}")>-1&&("radio"===t.type?e=e.replace("{{"+t.name+"}}",t.closest(".globo-form-control").querySelector("[name="+t.name+"]:checked")?t.closest(".globo-form-control").querySelector("[name="+t.name+"]:checked").value:""):"checkbox"===t.type?(o[r]=void 0!==o[r]?o[r]:[],t.checked&&o[r].push(t.value)):"file"===t.type?t.multiple?(o[r]=void 0!==o[r]?o[r]:[],t.files.length&&Object.values(t.files).map((e=>{o[r].push(e.name)}))):e=e.replace("{{"+t.name+"}}",t.value?t.value.split("fakepath\\")[1]:""):e=e.replace("{{"+t.name+"}}",t.value))})),Object.keys(o).length>0&&Object.entries(o).map((t=>{e.indexOf("{{"+t[0]+"}}")>-1&&(e=e.replace("{{"+t[0]+"}}",t[1]))})),e},closeModalForm:function(e){const t=e.closest(".globo-form-publish-modal");if(t.style.display="none",t.classList.contains("lightbox")){const e=this.forms[t.querySelector(".globo-formbuilder").getAttribute("data-id")].publish;switch(e.selectTime){case"none":var r=0;break;case"weeks":r=void 0!==e.setCookieWeeks?7*parseInt(e.setCookieWeeks):7;break;case"days":r=void 0!==e.setCookie?parseInt(e.setCookie):1;break;case"hours":r=void 0!==e.setCookieHours?parseInt(e.setCookieHours)/12:1/12;break;default:r=365}s.set("globo-form-lightbox-"+t.getAttribute("data-id"),r,{expires:r})}}},n=r(6808),d={init:async function(e,t){this.needReRender(t)&&await this.renderForm(e,t),Object.assign(Globo.FormBuilder,l),e.addEventListener("submit",this.handleSubmit,!1),this.handleLabel(e,t),this.handleRequireLogin(t),this.handleLightBox(e,t);const r=this.forms[t].functions??this.specialElements([t]);r.includes("bulkOrder")&&this.handleBulkOrder(e,t),r.includes("cart")&&this.handleCart(e,t),r.includes("wizard")&&this.handleWizard(e,t),r.includes("floatingForm")&&this.handleFloatingForm(e,t),r.includes("hidden")&&this.handleHidden(e,t),r.includes("intl-phone")&&this.handleIntlPhone(e,t),r.includes("datetime")&&this.handleDateTime(e,t),r.includes("conditional")&&this.handleConditional(e,t),r.includes("reCaptcha")&&this.handleReCaptcha(e,t),r.includes("account")&&this.handleAccount(e,t);const o=new CustomEvent("globo.formbuilder.form.loaded",{detail:{form:e,formId:t}});document.dispatchEvent(o)},needReRender:function(e){if(document.body.classList.contains("globo-formbuilder-admin-preview"))return!1;let t=!1;const r={};return document.querySelector("#globo-formbuilder-dynamicCSS")&&(r.dynamicCSS=document.querySelector("#globo-formbuilder-dynamicCSS").innerHTML,t=!0),document.querySelector("#globo-formbuilder-template")&&(r.template=document.querySelector("#globo-formbuilder-template").innerHTML,t=!0),document.querySelector("#globo-formbuilder-element")&&(r.element=document.querySelector("#globo-formbuilder-element").innerHTML,t=!0),void 0!==this.utm&&void 0!==this.utm.view&&"formbuilder_edit"==this.utm.view&&(t=!0),this.templates=r,t||this.allFunctions.includes("bulkOrder")||!this.forms[e]?.html},renderForm:async function(e,t,o=!1){const{default:a}=await Promise.all([r.e(620),r.e(542)]).then(r.bind(r,1331));let i=this.forms[t].elements.filter((e=>e.id.indexOf("products")>-1));if(i.length){await this.handleBulkOrder(e,t);const{bulkOrder:r}=Globo.FormBuilder;await r.updateProducts(i)}const s=this.templates.dynamicCSS||a.templates.dynamicCSS,l=this.templates.template||a.templates.template,n=this.templates.element||a.templates.element;let d=a.parseAndRenderSync(l,{configs:{...this.forms[t],formId:t},partialElement:n,dynamicCSS:s,formId:t,Globo});if(o&&i.length){const{bulkOrder:e}=Globo.FormBuilder;d=e.reShowMessage(d,o)}e.innerHTML=d,e.setAttribute("data-id",t)},handleBulkOrder:async function(e,t){const o=await r.e(649).then(r.bind(r,8419)),{default:a}=o;Object.assign(Globo.FormBuilder,{bulkOrder:a}),a.init(e,t)},handleCart:async function(e,t){if("cart"===this.page?.type){const t=await r.e(511).then(r.bind(r,8857)),{default:o}=t;Object.assign(Globo.FormBuilder,{Cart:o});const a=new o(e);a.setAttributeType(),a.updateCartNote()}},handleWizard:async function(e,t){const o=await r.e(32).then(r.bind(r,906)),{default:a}=o;Object.assign(Globo.FormBuilder,a);const i=e.querySelector(".globo-formbuilder-wizard");new Globo.FormBuilder.Wizard(e,i).init()},handleFloatingForm:async function(e,t){const o=await r.e(995).then(r.bind(r,750)),{default:a}=o;Object.assign(Globo.FormBuilder,a),a.init(e,t)},handleHidden:async function(e,t){const o=await r.e(898).then(r.bind(r,5772)),{default:a}=o;this.hiddenInit=a.init,this.hiddenInit(e,t)},handleIntlPhone:async function(e,t){const o=await r.e(77).then(r.bind(r,6679)),{default:a}=o;a.init(e,t)},handleDateTime:async function(e,t){const o=await Promise.all([r.e(502),r.e(848)]).then(r.bind(r,5293)),{default:a}=o;a.init(e,t)},handleConditional:async function(e,t){const o=await r.e(406).then(r.bind(r,9847)),{default:a}=o;a.init(e,t)},handleReCaptcha:async function(e,t){const o=await r.e(1).then(r.bind(r,8431)),{default:a}=o;Object.assign(Globo.FormBuilder,{reCaptcha:a}),a.init(e)},handleAccount:async function(e,t){const o=await r.e(809).then(r.bind(r,9945)),{default:a}=o;Object.assign(Globo.FormBuilder,{account:a}),a.init(e,t)},handleLabel:function(e,t){const r=e.querySelectorAll(".globo-form-control"),o={};for(let e=0;e<r.length;e++){const t=r[e],a=t.querySelector("label, legend");if(a){const e=t.querySelector("[name]");if(e){const t=e.getAttribute("name").replace("[]",""),r=a.querySelector(".label-content");o[t]=r.dataset.label||r.innerHTML}}}e.querySelector('[name="_keyLabel"]').value=JSON.stringify(o),e.querySelector('[name="page[title]"]').value=this.page?.title,e.querySelector('[name="page[href]"]').value=this.page?.href,this.customer&&(e.querySelector('[name="customer[id]"]')&&(e.querySelector('[name="customer[id]"]').value=this.customer.id),e.querySelector('[name="customer[email]"]')&&(e.querySelector('[name="customer[email]"]').value=this.customer.email),e.querySelector('[name="customer[name]"]')&&(e.querySelector('[name="customer[name]"]').value=this.customer.name))},handleRequireLogin:function(e){const t=this.forms[e].publish;if(!t||!t.requiredLogin)return;if(Globo.FormBuilder.customer?.id)return;const r=document.querySelectorAll(".globo-form-id-"+e);r&&r.forEach((function(e){if(e.querySelector(".globo-form-app")){const r=e.querySelectorAll(".form-container-overlayboxs");if(r&&r.forEach((function(e){e.remove()})),t.requiredLogin){e.classList.add("globo_required_login_form");const r='<div class="form-container-overlayboxs"><div class="form-overlay-box">'+t.requiredLoginMessage+"</div></div>";e.querySelector(".globo-form-app").innerHTML+=r}else e.classList.remove("globo_required_login_form")}}))},handleLightBox:function(e,t){const r=e.closest(".globo-form-publish-modal");if(r&&(e.querySelector(".header.dismiss").classList.remove("hidden"),r.classList.contains("lightbox"))){const e=this.forms[t].publish;switch(e.selectTime){case"none":var o=0;break;case"weeks":o=void 0!==e.setCookieWeeks?7*parseInt(e.setCookieWeeks):7;break;case"days":o=void 0!==e.setCookie?parseInt(e.setCookie):1;break;case"hours":o=void 0!==e.setCookieHours?parseInt(e.setCookieHours)/12:1/12;break;default:o=365}n.get("globo-form-lightbox-"+r.getAttribute("data-id"))!=o&&r.classList.remove("hidden")}}}}}]);