!function(){"use strict";customElements.get("product-form")||customElements.define("product-form",class extends HTMLElement{constructor(){var t,e,i;super(),i=t=>{const e=t?"add":"remove";this.form.closest(".product-form").classList[e]("adding")},(e="toggleSpinner")in(t=this)?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,this.selectors={form:"form",inputId:"[name=id]",submitButton:'[name="add"]',errorWrapper:".prod__form-error",customFields:["[data-product-custom-field]"],dynamicCheckout:".prod__dynamic_checkout"},this.domNodes=queryDomNodes(this.selectors,this),this.form=this.domNodes.form,this.submitButton=this.domNodes.submitButton,this.domNodes.inputId.disabled=!1,this.notificationType=this.dataset.notificationType,this.customFields=document.querySelectorAll(this.selectors.customFields),this.domNodes.dynamicCheckout&&(this.enable_dynamic_checkout=!0),this.form.addEventListener("submit",this.onSubmitHandler.bind(this)),this.domNodes.dynamicCheckout&&this.customFields&&this.domNodes.dynamicCheckout.addEventListener("click",(t=>{validateForm(this.form.closest(".main-product__blocks")).length>0&&(t.stopPropagation(),window.MinimogTheme.Notification.show({target:this.domNodes.errorWrapper,method:"appendChild",type:"warning",message:window.MinimogStrings.requiredField,delay:100}))}),!0)}onSubmitHandler(t){t.preventDefault(),this.toggleSpinner(!0);const e=validateForm(this.form.closest(".main-product__blocks"));var i;if((null==e?void 0:e.length)>0)return this.toggleSpinner(!1),window.MinimogTheme.Notification.show({target:null==this||null===(i=this.domNodes)||void 0===i?void 0:i.errorWrapper,method:"appendChild",type:"warning",message:window.MinimogStrings.requiredField});const o={method:"POST",headers:{Accept:"application/javascript","X-Requested-With":"XMLHttpRequest"}},s=new FormData(this.form);o.body=s;const{MinimogSettings:n,MinimogStrings:d}=window;n.use_ajax_atc?fetch(`${n.routes.cart_add_url}`,o).then((t=>t.json())).then((t=>{if(t.status)return window.MinimogTheme.Notification.show({target:"toast"===this.notificationType?document.body:this.domNodes.errorWrapper,method:"appendChild",type:"warning",message:t.description,last:3e3,sticky:"toast"===this.notificationType});n.enable_cart_drawer||window.MinimogTheme.Notification.show({target:this.domNodes.errorWrapper,method:"appendChild",type:"success",message:window.MinimogStrings.itemAdded,last:3e3,sticky:"toast"===this.notificationType}),window.MinimogEvents.emit("ON_ITEM_ADDED",t),window.Shopify.onItemAdded(t)})).catch((t=>{})).finally((()=>{this.toggleSpinner(!1)})):fetch(`${n.routes.cart_add_url}`,o).then((t=>t.json())).then((t=>{if(t.status)return window.MinimogTheme.Notification.show({target:this.domNodes.errorWrapper,method:"appendChild",type:"warning",message:t.description,last:3e3});n.use_ajax_atc,window.MinimogEvents.emit("ON_ITEM_ADDED",t),window.Shopify.onItemAdded(t)})).catch((t=>{})).finally((()=>{this.toggleSpinner(!1)}))}})}();